# chapter 4. 테스트 구축하기

리팩터링을 하지 않더라도 좋은 테스트를 작성하는 일은 개발 효율을 높여준다. 자동 리팩터링 도구를 활용하더라도 테스트 스위트로 재차 검증은 필수적이다.

### 자가 테스트 코드의 가치

> 모든 테스트를 완전히 자동화하고 그 결과까지 스스로 검사하게 만들자

> 테스트 스위트는 강력한 버그 검출 도구로, 버그를 찾는데 걸리는 시간을 대폭 줄여준다.

테스트를 작성하기 가장 좋은 시점은 프로그래밍을 시작하기 전이다.

테스트를 작성하다보면 원하는 기능을 추가하기 위해 무엇이 필요한 지 고민하게 된다.

테스트-코딩-리팩터링 과정을 한 시간에도 여러차례 진행하기 때문에 코드를 생산적으로 작성할 수 있다.

### 테스트 코드 작성

JUnit은 켄트 벡이 1990년대 자동 테스팅이 되도록 시작하게 만든 핵심 툴이다. 여전히 JUnit을 많이 사용한다.

> 자주 테스트하라. 작성 중인 코드는 최소한 몇 분 간격으로 테스트하고, 적어도 하루에 한 번은 전체 테스트를 돌리자.

- 테스트의 진행 상태를 흔히 '초록 막대'와 '빨간 막대'라고 부른다. 최근 변경을 취소하고 마지막으로 모든 테스트를 통과했던 상태로 돌아가라는 말은 초록막대로 되돌려라와 같은 말이다.
- 테스트는 위험 요인을 중심으로 작성되어야 한다. 테스트의 목적은 어디까지나 현재 혹은 향후에 발생하는 버그를 찾는 데에 있다.
- 테스트 관련 버그 중 가장 지저분한 유형인 **테스트끼리 상호작용하게 만드는 공유 픽스처**는 반드시 피해야한다. 
  - `beforeEach`를 적극적으로 활용하자
- 